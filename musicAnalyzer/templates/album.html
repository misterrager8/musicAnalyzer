{% extends "base.html" %}
{% import "macros.html" as macros with context %}

{% block body %}
<title>{{ album.title }}</title>
<div class="text-center">
  <p class="h1">{{ album.title }}</p>
  <a class="link h3" href="{{ url_for('artists.artist', id_=album.artist_id) }}">{{ album.artists.name }}</a>
  {% if album.release_date %}<p class="h5">{{ album.release_date.strftime('%Y') }}</p>{% endif %}
  <span>{{ '%s song(s)' % album.get_songs().count() }}</span><br>
  {{ album.get_avg_rating() }}
</div>
{{ macros.song_add_form(album) }}
<div class="row">
  {% for i in album.get_songs() %}
  {{ macros.song_box(i) }}
  {% endfor %}
</div>
<div class="mt-5">
  <p class="h3">Tags</p>
  <div>
    {% for i in album.get_tags() %}
    <span class="badge" style="background-color:{{ i.get_tag().color }}">{{ i.get_tag().name }} <a class="ms-5 link" onclick="albumUntag({{ i.id }})">x</a></span>
    {% endfor %}
  </div>
  <div class="mt-5">
    {% for i in current_user.tags %}
    <span class="badge" style="background-color:{{ i.color }}">{{ i.name }} <a class="ms-5 link" onclick="albumTag({{ album.id }}, {{ i.id }})">+</a></span>
    {% endfor %}
  </div>
</div>
{% endblock %}